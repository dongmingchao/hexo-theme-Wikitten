<%# 文章大纲 %>
<% var profile = theme.customize.profile; %>
<% var tagCount = site.tags.filter(function(tag) { return tag.length; }).length; %>
<div class="inner profile-inner" id="n-toc">
    <ul class="post-toc-wrap" for="post-toc-trigger-btn" style="max-height:80vh; overflow-y:scroll;">
        <%- toc(page.content, {
                class: 'post-toc',
                list_number: false,
                style: 'max-height:80vh; overflow-y:scroll;'
            }) %>
    </ul>
    <!-- <div class="base-info profile-block">
            <img id="avatar" src="<%= ( profile.gravatar ? gravatar(profile.gravatar, 128) : url_for(profile.avatar)) %>" />
            <h2 id="name"><%= profile.author %></h2>
            <h3 id="title"><%= profile.author_title %></h3>
            <span id="location"><i class="fa fa-map-marker"></i><%= profile.location %></span>
            <a id="follow" target="_blank" href="<%= profile.follow %>"><%= __('profile.follow') %></a>
        </div>
        <div class="article-info profile-block">
            <div class="article-info-block">
                <%= site.posts.length %>
                <span><%= (site.posts.length > 1 ? __('profile.posts') : __('profile.post')) %></span>
            </div>
            <div class="article-info-block">
                <%= tagCount %>
                <span><%= (tagCount > 1 ? __('profile.tags') : __('profile.tag')) %></span>
            </div>
        </div>
        <% if(theme.customize.social_links) { %>
        <div class="profile-block social-links">
            <table>
                <tr>
                    <% var tooltipClass = theme.customize.social_link_tooltip === false ? '' : 'class=tooltip'; %>
                    <% for(var i in theme.customize.social_links) { %>
                    <td>
                        <a href="<%- url_for(theme.customize.social_links[i]) %>" target="_blank" title="<%= i %>" <%= tooltipClass %>>
                            <i class="fa fa-<%= i %>"></i>
                        </a>
                    </td>
                    <% } %>
                </tr>
            </table>
        </div>
        <% } %> -->
</div>

<script>
    let toc = document.getElementById('n-toc');
    toc._offsetTop = toc.offsetTop - 40;
    onscroll = function () {
        if (scrollY > toc._offsetTop) {
            toc.style.marginTop = (scrollY - toc._offsetTop) + 'px';
        }else toc.style.marginTop = '40px';
    }
</script>